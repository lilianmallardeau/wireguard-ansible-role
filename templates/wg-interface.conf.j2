[Interface]
Address = {{ wireguard_ip_address }}
PrivateKey = {{ wireguard_private_key }}
ListenPort = {{ wireguard_listen_port }}
{% if wireguard_dns %}DNS = {{ wireguard_dns }}{% endif %}
{% if wireguard_mtu %}MTU = {{ wireguard_mtu }}{% endif %}
{% if wireguard_preup %}PreUp = {{ wireguard_preup }}{% endif %}
{% if wireguard_postup %}PostUp = {{ wireguard_postup }}{% endif %}
{% if wireguard_predown %}PreDown = {{ wireguard_predown }}{% endif %}
{% if wireguard_postdown %}PostDown = {{ wireguard_postdown }}{% endif %}


{% for peer in wireguard_peers %}
[Peer]
AllowedIPs = {{ peer.allowed_ips }}
PublicKey = {{ peer.public_key }}
{% if peer.psk is defined %}PresharedKey = {{ peer.psk }}{% endif %}
{% if peer.endpoint is defined %}Endpoint = {{ peer.endpoint }}{% endif %}
{% if peer.keepalive is defined %}PersistentKeepalive = {{ peer.keepalive }}{% endif %}

{% endfor %}
